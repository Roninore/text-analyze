(self.webpackChunk_ozon_ozon_ru=self.webpackChunk_ozon_ozon_ru||[]).push([["libs-core"],{de3f4:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){void 0===e&&(e=console),this._hooks=new Map,this._onError=e}return e.prototype.on=function(e,t){var r=this;if(e&&t){this._hooks.has(e)||this._hooks.set(e,new Set);var o=this._hooks.get(e);return o&&o.add(t),function(){var o=r._hooks.get(e);o&&o.delete(t)}}var n=this.hookException("Error while try to subscribe on hook without passing name or handler!");this._onError.error(n)},e.prototype.once=function(e,t){if(e&&t){var r=this.on(e,(function(e){t(e),r&&r()}));return r}var o=this.hookException("Error while try to once subscribe on hook without passing name or handler!");this._onError.error(o)},e.prototype.callHook=function(e,t){return r=this,n=function(){var r,o,n,i,s,a,u;return function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(c){switch(c.label){case 0:if(!e)return u=this.hookException("Error while try to call hook without name or passing values!"),this._onError.error(u),[2,void 0];if(r=this._hooks.get(e),!(o=r?Array.from(r):[]).length)return[3,8];n=0,c.label=1;case 1:if(!(n<o.length))return[3,8];if("function"!=typeof(i=o[n]))return[3,6];c.label=2;case 2:return c.trys.push([2,4,,5]),[4,this.resolveHookPromise(i,t)];case 3:return null===(s=c.sent())||!1!==s&&"object"!=typeof s?[3,5]:[2,s];case 4:return a=c.sent(),u=this.hookException(a,i),this._onError.error(u),[2,!1];case 5:return[3,7];case 6:u=this.hookException("Hook must be type of function, but passed - "+typeof i+"!",i),this._onError.error(u),c.label=7;case 7:return n++,[3,1];case 8:return[2,void 0]}}))},new((o=void 0)||(o=Promise))((function(e,t){function i(e){try{a(n.next(e))}catch(e){t(e)}}function s(e){try{a(n.throw(e))}catch(e){t(e)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(i,s)}a((n=n.apply(r,[])).next())}));var r,o,n},e.prototype.resolveHookPromise=function(e,t){var r;return Promise.race([new Promise((function(r,o){var n=e(t);return n instanceof Promise?n.then((function(e){return n=e})).then(r).catch(o):r(n)})),new Promise((function(e,t){r=setTimeout(t,5e3,new Error("Time out in 5000 ms. while try to resolve hook!"))}))]).finally((function(){return clearTimeout(r)}))},e.prototype.hookException=function(e,t){var r=e instanceof Error?e:new Error("Error during call hook!"),o="string"==typeof e?new Error(e):r;return{exception:e instanceof Error?e:o,payload:{hook:void 0!==t?t.toString():"none"},zone:"hook"}},e}();t.HookEmitter=r},b63a9:function(e,t,r){"use strict";r.d(t,{Xe:function(){return T},hX:function(){return filter},xQ:function(){return v}});var o=r("98bae"),n={closed:!0,next:function(){},error:function(e){setTimeout((function(){throw e}),0)},complete:function(){}};function c(e){return Error.call(this),Object.assign(this,{name:"UnsubscriptionError",errors:e}),Object.defineProperty(this,"message",{get:function(){var e=this.errors;if(!e||!e.length)return"";var t=e.reduce((function(e,t,i){return t&&e.push(i+1+") "+t.toString()),e}),[]);return t.length+" errors occurred during unsubscription:\n"+t.join("\n  ")}}),this}c.prototype=Object.create(Error.prototype);var l=c,h=function(){function e(e){this._unsubscribe=e,this.closed=!1,this.parents=null,this.finalizers=null}return e.prototype.unsubscribe=function(){var e=this;if(!this.closed){var t=[],r=this.parents,o=this.finalizers;if(this.closed=!0,this.parents=null,this.finalizers=null,r&&r.forEach((function(t){t.remove(e)})),"function"==typeof this._unsubscribe)try{this._unsubscribe()}catch(e){d(t,e)}if(o&&o.forEach((function(e){try{e&&e.unsubscribe()}catch(e){d(t,e)}})),t.length)throw new l(t)}},e.prototype.add=function(t){if(!t)return e.EMPTY;var r=t;return r===this||r.closed||"function"!=typeof r.unsubscribe?r:this.closed?(r.unsubscribe(),r):(r instanceof e||((r=new e).finalizers=new Set([t])),r.parents=r.parents||new Set,r.parents.add(this),this.finalizers=this.finalizers||new Set,this.finalizers.add(r),r)},e.prototype.remove=function(e){this.finalizers&&this.finalizers.delete(e)},e.EMPTY=Object.assign(new e,{closed:!0}),e}();function d(e,t){t&&(Array.isArray(t.errors)?t.errors.forEach((function(t){d(e,t)})):e.push(t))}var f=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,r.destination=t||n,t instanceof h&&t.add(r),r}return(0,o.__extends)(t,e),t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype._next=function(e){this.destination.next&&this.destination.next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype._error=function(e){try{this.destination.error&&this.destination.error(e)}finally{this.unsubscribe()}},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype._complete=function(){try{this.destination.complete&&this.destination.complete()}finally{this.unsubscribe()}},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t}(h),E=function(){};function y(e){return e?1===e.length?e[0]:function(input){return e.reduce((function(e,t){return t(e)}),input)}:E}var _=function(){function e(e){this.source=null,this.operator=null,e&&(this._subscribe=e)}return e.prototype.lift=function(t){return Object.assign(new e,{source:this,operator:t})},e.prototype.subscribe=function(e){var t=e instanceof f?e:new f(e);return this.operator?t.add(this.operator.call(t,this.source)):t.add(this.source?this._subscribe(t):this._trySubscribe(t)),t},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:y(e)(this)},e.prototype._subscribe=function(e){if(this.source)return this.source.subscribe(e)},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){return void e.error(t)}},e}(),v=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t.observers=[],t}return(0,o.__extends)(t,e),t.prototype.lift=function(e){return Object.assign(new m(this,this),{operator:e})},t.prototype.next=function(e){this._throwIfClosed(),this.isStopped||this.observers.forEach((function(t){t.next(e)}))},t.prototype.error=function(e){this._throwIfClosed(),this.isStopped||(this.isStopped=!0,this.hasError=!0,this.thrownError=e,this.observers.forEach((function(t){t.error(e)})),this.observers.length=0)},t.prototype.complete=function(){this._throwIfClosed(),this.isStopped||(this.isStopped=!0,this.observers.forEach((function(e){e.complete()})),this.observers.length=0)},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers.length=0},t.prototype.asObservable=function(){return Object.assign(new _,{source:this})},t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){var t=this;return this._throwIfClosed(),this.hasError?(e.error(this.thrownError),h.EMPTY):this.isStopped?(e.complete(),h.EMPTY):(this.observers.push(e),new h((function(){if(t.observers){var r=t.observers.indexOf(e);-1!==r&&t.observers.splice(r,1)}})))},t.prototype._throwIfClosed=function(){if(this.closed)throw new Error("object unsubscribed")},t}(_),m=function(e){function t(t,source){var r=e.call(this)||this;return r.destination=t,r.source=source,r}return(0,o.__extends)(t,e),t.prototype.next=function(e){this.destination.next(e)},t.prototype.error=function(e){this.destination.error(e)},t.prototype.complete=function(){this.destination.complete()},t.prototype._subscribe=function(e){return this.source.subscribe(e)},t}(v),T=function(e){function t(t){var r=e.call(this)||this;return r._value=t,r}return(0,o.__extends)(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;return this._throwIfClosed(),this._value},t.prototype.next=function(t){this._value=t,e.prototype.next.call(this,t)},t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r&&!r.closed&&t.next(this._value),r},t}(v);function filter(e,t){return function(source){return source.lift({call:function(r,o){return o.subscribe(new C(r,e,t))}})}}var C=function(e){function t(t,r,o){var n=e.call(this,t)||this;return n.destination=t,n.predicate=r,n.thisArg=o,n.count=0,n}return(0,o.__extends)(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(f)},c9e1e:function(e){(()=>{"use strict";var t={d:(e,r)=>{for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};t.r(r),t.d(r,{APPLY_TAB:()=>o,ECacheNames:()=>d,EGenderTypes:()=>l,ELoggerLogLevels:()=>h,ESocketNamespaces:()=>n,EUserTypes:()=>c});const o=Symbol("ApplyTab");var n,c,l,h,d;!function(e){e.COMMUNICATION="CHAT",e.LVS="LVS"}(n||(n={})),function(e){e[e.PHYSICAL=1]="PHYSICAL",e[e.LEGAL=2]="LEGAL"}(c||(c={})),function(e){e[e.EMPTY=0]="EMPTY",e[e.MALE=1]="MALE",e[e.FEMALE=2]="FEMALE"}(l||(l={})),function(e){e.ERROR="error",e.WARN="warn",e.INFO="info"}(h||(h={})),function(e){e.HOME_PAGE="ozon-home-cache-v1",e.PAGINATOR="ozon-paginator-cache-v1",e.PDP_ASPECTS="ozon-aspects-cache-v1"}(d||(d={})),e.exports=r})()},"066fb":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("98bae"),n=r("de3f4"),c=r("3c906"),l=r("9c772");var s,i,a,u,h,p,d=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(c),f=["fullScreen","theme","withScroll","scrollingWrapper","closeButton","closeButtonPosition","notCentered","centered","noSelfClose","qaClose","qaContent"];t.ContextKey=void 0,(s=t.ContextKey||(t.ContextKey={})).PAGE="page",s.MODAL="modal",t.EComposerRedirectTargets=void 0,(i=t.EComposerRedirectTargets||(t.EComposerRedirectTargets={})).SELF="_self",i.BLANK="_blank",t.ERouterHook=void 0,(a=t.ERouterHook||(t.ERouterHook={})).BEFORE_ROUTE_LEAVE="BEFORE_ROUTE_LEAVE",a.AFTER_ROUTE_ENTER="AFTER_ROUTE_ENTER",a.BEFORE_ROUTE_ENTER="BEFORE_ROUTE_ENTER",a.START_ROUTE_LOADING="START_ROUTE_LOADING",a.END_ROUTE_LOADING="END_ROUTE_LOADING",a.BEFORE_URL_CHANGE="BEFORE_URL_CHANGE",a.AFTER_URL_CHANGE="AFTER_URL_CHANGE",t.EContextHook=void 0,(u=t.EContextHook||(t.EContextHook={})).BEFORE_ROUTE_LEAVE="BEFORE_ROUTE_LEAVE",u.AFTER_ROUTE_ENTER="AFTER_ROUTE_ENTER",u.BEFORE_ROUTE_ENTER="BEFORE_ROUTE_ENTER",u.START_ROUTE_LOADING="START_ROUTE_LOADING",u.END_ROUTE_LOADING="END_ROUTE_LOADING",u.BEFORE_URL_CHANGE="BEFORE_URL_CHANGE",u.AFTER_URL_CHANGE="AFTER_URL_CHANGE",t.EComposerRouterStatus=void 0,(h=t.EComposerRouterStatus||(t.EComposerRouterStatus={})).LOADING_SUCCESS="success",h.LOADING_FAILURE="failure",h.LOADING_PENDING="pending",h.LOADING_CANCELLED="cancelled",h.LOADING_REDIRECTED="redirected",t.EContextLoggerLevel=void 0,(p=t.EContextLoggerLevel||(t.EContextLoggerLevel={})).ERROR="error",p.WARNING="warning";var E="object"==typeof window,y=E&&window.history&&window.history.pushState,g={silent:!1,force:!1,scroll:!0,saveHistory:!0},_=function(e,t){if(void 0===t&&(t={}),!e)return{};var r=t.disableDecode,o=void 0!==r&&r,n=e.slice(e.indexOf("?")+1).split("&").reduce((function(e,t){var r=t.split("="),n=r[1]||"";return e[r[0]]=o?n:decodeURIComponent(n),e}),{});return n},v=function(e,t){void 0===t&&(t={});var r,n=t.canAccessWindow,s=void 0===n?E:n,i=o.__rest(t,["canAccessWindow"]),a=!1;s?r=new URL(e,window.location.origin):(r=new URL(e,"http://anyhost"),a=!/^https?:\/\//i.test(e));var u=r.pathname.replace(/((\/)+|(?!\/))$/,"/");return{path:u,search:r.search,query:_(r.search,i),hash:r.hash,fullPath:u+r.search+r.hash,hostname:a?"":r.hostname,protocol:a?"":r.protocol}},m=function(e,t){if(!e||!t)return!1;var r=v(e),o=v(t);return!(!r.path||!o.path)&&r.path===o.path&&r.hash===o.hash&&function(e,t){var r=Object.keys(e),o=Object.keys(t);return r.length===o.length&&r.every((function(r){return e[r]===t[r]}))}(r.query,o.query)&&r.hostname===o.hostname},T=function(e,t){return t.reduce((function(t,r){return Object.prototype.hasOwnProperty.call(e,r)?(t[r]="object"==typeof e[r]?o.__assign({},e[r]):e[r],t):t}),{})},C=function(){function e(e){this.contextName=e}return e.prototype.fetchComposerState=function(e,r,n){var c=r.to,s=r.postBody;return void 0===n&&(n=!1),o.__awaiter(this,void 0,void 0,(function(){var r,i,a,u;return o.__generator(this,(function(o){switch(o.label){case 0:return r=s?"post":"get",i=function(e){var t=function(e){if(!document)return console.warn("Do not use @app/helpers/strings:parseURL on serverSide"),{};var t=document.createElement("a");t.href=e;var r=t.pathname;return r=("/"!==r.charAt(0)?"/":"")+r,{hash:t.hash,host:t.host,hostname:t.hostname,href:t.href,pathname:r,protocol:t.protocol,search:t.search,originalEl:t}}(e),r=location.host===t.host?"":t.protocol+"://"+t.host;return t.originalEl.search=t.search?t.search+"&page_changed=true":"?page_changed=true",""+r+t.pathname+t.originalEl.search+t.hash}(c),window&&performance&&performance.mark&&performance.mark("RENDER_TIME:start"),[4,e.fetchComposerLayout({url:i,method:r,payload:s,forbidRedirect:n,context:this.contextName})];case 1:return"object"!=typeof(a=o.sent())?"canceled"===a?[2,{status:t.EComposerRouterStatus.LOADING_CANCELLED}]:(window.location.assign(c),[2,{status:t.EComposerRouterStatus.LOADING_FAILURE}]):(this.pageData=a.pageData,this.widgetsData=a.widgetsData,(u=d.default(this.pageData,"pageInfo.url"))&&c!==u?[2,{status:t.EComposerRouterStatus.LOADING_REDIRECTED,href:u}]:[2,{status:t.EComposerRouterStatus.LOADING_SUCCESS}])}}))}))},e.prototype.setComposerState=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.pageData?[4,e.reinitAnalytics()]:[3,3];case 1:return t.sent(),[4,e.setComposerLayout({pageData:this.pageData,widgetsData:this.widgetsData})];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},e}(),A=function(e){function r(r,o){var n=e.call(this,{error:function(e){return r.$logger.error(e)}})||this;return n.current="/",n.prev="",n.loading=!1,n.status=t.EComposerRouterStatus.LOADING_SUCCESS,n.action="replace",n.options=null,n.app=r,n.name=n.getName(),n.layoutManager=new C(n.name),n.useSPA=o,n}return o.__extends(r,e),r.prototype.startLoading=function(e){return o.__awaiter(this,void 0,void 0,(function(){var r,n;return o.__generator(this,(function(o){switch(o.label){case 0:this.loading=!0,this.status=e,r={to:this.current,from:this.prev,status:e},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.callHook(t.EContextHook.START_ROUTE_LOADING,r)];case 2:return o.sent(),[3,4];case 3:return n=o.sent(),this.logContextError(n),[3,4];case 4:return[2]}}))}))},r.prototype.stopLoading=function(e){return o.__awaiter(this,void 0,void 0,(function(){var r,n;return o.__generator(this,(function(o){switch(o.label){case 0:this.loading=!1,this.status=e,r={to:this.current,from:this.prev,status:e},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.callHook(t.EContextHook.END_ROUTE_LOADING,r)];case 2:return o.sent(),[3,4];case 3:return n=o.sent(),this.logContextError(n),[3,4];case 4:return[2]}}))}))},r.prototype.logContextError=function(e,r){if(void 0===r&&(r=t.EContextLoggerLevel.ERROR),this.app.$logger){var o=e instanceof Error?e:new Error("string"==typeof e?e:"Error during route navigation!");r!==t.EContextLoggerLevel.WARNING&&(this.stopLoading(t.EComposerRouterStatus.LOADING_FAILURE),this.pending=null),this.app.$logger[r]({exception:o,zone:"context"})}else console.warn("The $logger in app is not determined")},r}(n.HookEmitter),O=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(r,e),r.prototype.getName=function(){return t.ContextKey.PAGE},r.prototype.run=function(e,t,r){return void 0===r&&(r={}),o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(o){switch(o.label){case 0:return this.action=t,r.silent?[4,this.routeUpdate(e)]:[3,2];case 1:case 3:return o.sent(),[2,Promise.resolve()];case 2:return[4,this.spaTransition(e,r)]}}))}))},r.prototype.routeUpdate=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(r){switch(r.label){case 0:return[4,this.callHook(t.EContextHook.BEFORE_URL_CHANGE,{to:e,from:this.current})];case 1:return r.sent(),"push"===this.action&&(this.prev=this.current),this.current=e,this.changeHistory(e),[4,this.callHook(t.EContextHook.AFTER_URL_CHANGE,{to:e,from:this.prev})];case 2:return r.sent(),[2]}}))}))},r.prototype.changeHistory=function(e){"pop"!==this.action&&window.history[this.action+"State"]({to:e},null,e)},r.prototype.spaTransition=function(e,n){return void 0===n&&(n={}),o.__awaiter(this,void 0,void 0,(function(){var c,s,i,a,u;return o.__generator(this,(function(o){switch(o.label){case 0:return c=n.scroll,s=n.saveHistory,a={},(i=n.postBody)&&(a.postBody=i),"pop"!==this.action&&s&&r.saveScrollPosition(this.current),this.useSPA||"replace"!==this.action||(a.modeSPA=!0,a.action=this.action,c&&!s||r.saveScrollPosition(this.current)),this.pending=e,[4,this.callHook(t.EContextHook.BEFORE_ROUTE_LEAVE,Object.assign({to:this.pending,from:this.current},a))];case 1:return!1===(u=o.sent())||"object"==typeof u&&u.status===t.EComposerRouterStatus.LOADING_CANCELLED?[4,this.stopLoading(t.EComposerRouterStatus.LOADING_CANCELLED)]:[3,3];case 2:return o.sent(),[2];case 3:return this.useSPA?[4,this.startLoading(t.EComposerRouterStatus.LOADING_PENDING)]:[3,5];case 4:o.sent(),o.label=5;case 5:return[4,this.layoutManager.fetchComposerState(this.app,{to:this.pending,from:this.current,postBody:i})];case 6:return"object"!=typeof(u=o.sent())?[3,8]:(u.status===t.EComposerRouterStatus.LOADING_REDIRECTED&&u.href&&(this.pending=u.href,this.action="push"),u.status!==t.EComposerRouterStatus.LOADING_CANCELLED?[3,8]:[4,this.stopLoading(t.EComposerRouterStatus.LOADING_CANCELLED)]);case 7:return o.sent(),[2];case 8:return u&&u.status===t.EComposerRouterStatus.LOADING_FAILURE?[4,this.stopLoading(t.EComposerRouterStatus.LOADING_FAILURE)]:[3,10];case 9:return o.sent(),[2];case 10:return this.prev=this.current,this.current=this.pending,s&&this.changeHistory(this.pending),[4,this.callHook(t.EContextHook.BEFORE_ROUTE_ENTER,{to:this.pending,from:this.prev})];case 11:return o.sent(),[4,this.layoutManager.setComposerState(this.app)];case 12:return o.sent(),[4,this.stopLoading(t.EComposerRouterStatus.LOADING_SUCCESS)];case 13:return o.sent(),[4,this.callHook(t.EContextHook.AFTER_ROUTE_ENTER,{to:this.pending,from:this.prev})];case 14:return o.sent(),c&&"pop"!==this.action&&window.scrollTo(0,0),this.pending=null,[2]}}))}))},r.saveScrollPosition=function(e){var t={to:e,scrollPosition:window.pageYOffset||window.scrollY};window.history.replaceState(t,"",e)},r}(A),I=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(r,e),r.prototype.getName=function(){return t.ContextKey.MODAL},r.prototype.run=function(e,t,r){return void 0===r&&(r={}),o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(o){switch(o.label){case 0:return this.action=t,r.silent?[4,this.routeUpdate(e)]:[3,2];case 1:case 3:return o.sent(),[2,Promise.resolve()];case 2:return[4,this.layoutUpdate(e,r)]}}))}))},r.prototype.layoutUpdate=function(e,r){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(o){switch(o.label){case 0:return this.pending=e,[4,this.callHook(t.EContextHook.BEFORE_ROUTE_LEAVE,{to:this.pending,from:this.current})];case 1:return!1===(n=o.sent())||"object"==typeof n&&n.status===t.EComposerRouterStatus.LOADING_CANCELLED?[4,this.stopLoading(t.EComposerRouterStatus.LOADING_CANCELLED)]:[3,3];case 2:case 6:case 8:return o.sent(),[2];case 3:return[4,this.startLoading(t.EComposerRouterStatus.LOADING_PENDING)];case 4:return o.sent(),[4,this.layoutManager.fetchComposerState(this.app,{to:this.pending,from:this.current,postBody:r.postBody},!0)];case 5:return"object"!=typeof(n=o.sent())||n.status!==t.EComposerRouterStatus.LOADING_CANCELLED?[3,7]:[4,this.stopLoading(t.EComposerRouterStatus.LOADING_CANCELLED)];case 7:return n&&n.status===t.EComposerRouterStatus.LOADING_FAILURE?[4,this.stopLoading(t.EComposerRouterStatus.LOADING_FAILURE)]:[3,9];case 9:return this.prev=this.current,this.current=this.pending,[4,this.callHook(t.EContextHook.BEFORE_ROUTE_ENTER,{to:this.pending,from:this.prev})];case 10:return o.sent(),this.layoutManager.pageData.layoutModal=this.layoutManager.pageData.layout,delete this.layoutManager.pageData.layout,[4,this.layoutManager.setComposerState(this.app)];case 11:return o.sent(),[4,this.stopLoading(t.EComposerRouterStatus.LOADING_SUCCESS)];case 12:return o.sent(),[4,this.callHook(t.EContextHook.AFTER_ROUTE_ENTER,{to:this.pending,from:this.prev})];case 13:return o.sent(),this.pending=null,[2]}}))}))},r.prototype.routeUpdate=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(r){switch(r.label){case 0:return[4,this.callHook(t.EContextHook.BEFORE_URL_CHANGE,{to:e,from:this.current})];case 1:return r.sent(),"push"===this.action&&(this.prev=this.current),this.current=e,[4,this.callHook(t.EContextHook.AFTER_URL_CHANGE,{to:e,from:this.prev})];case 2:return r.sent(),[2]}}))}))},r}(A),w=function(e){function r(o){var n,c=o.baseUrl,s=o.referrer,i=o.app,a=e.call(this,i,Boolean(o.useSpa))||this;return r.router?r.router:(a.setContext(t.ContextKey.PAGE),a.context.current=y?(n=window.location).pathname+n.search+n.hash||"/":c,a.context.prev=y?s||document.referrer||"":s,a.app=i,a.init(),r.router=a,a)}return o.__extends(r,e),Object.defineProperty(r.prototype,"current",{get:function(){return this.context.current},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"prev",{get:function(){return this.context.useSPA||this.context.prev?this.context.prev:document.referrer||""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"loading",{get:function(){return this.context.loading},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"status",{get:function(){return this.context.status},enumerable:!1,configurable:!0}),r.getInstance=function(){return this.router},r.prototype.push=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){var r;return o.__generator(this,(function(o){switch(o.label){case 0:if(!y)return[2];if(!e)return this.logRouterError("You need to passed url into push method"),[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.runContext("push",e,t)];case 2:return o.sent(),[3,4];case 3:return r=o.sent(),this.logRouterError(r),[3,4];case 4:return[2]}}))}))},r.prototype.replace=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){var r;return o.__generator(this,(function(o){switch(o.label){case 0:if(!y)return[2];if(!e)return this.logRouterError("You need to passed url into replace method"),[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.runContext("replace",e,t)];case 2:return o.sent(),[3,4];case 3:return r=o.sent(),this.logRouterError(r),[3,4];case 4:return[2]}}))}))},r.prototype.back=function(){y&&window.history.go(-1)},r.prototype.forward=function(){y&&window.history.go(1)},r.prototype.redirect=function(e,t){void 0===t&&(t="_self"),y&&(e||this.logRouterError("You don't passed url in the router for redirect on new route!"),window.open(e,t))},r.prototype.refresh=function(e){var t=void 0===e?{}:e,r=t.action,n=void 0===r?"replace":r,s=t.scroll,i=void 0===s||s,a=t.postBody,u=t.saveHistory,c=void 0===u||u;return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){switch(t.label){case 0:if(!y)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.runContext(n,this.current,{scroll:i,force:!0,postBody:a,saveHistory:c})];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),this.logRouterError(e),[3,4];case 4:return[2]}}))}))},r.prototype.getParams=function(e){e&&this.setContextByPath(e);var t=e||this.current;if(t)try{return v(t)}catch(e){this.logRouterError(e);var r=t.split("?")[0];return v(r)}else this.logRouterError("Can not find url for conversion!")},r.prototype.on=function(e,t){return this.context.on(e,t)},r.prototype.once=function(e,t){return this.context.once(e,t)},r.prototype.runContext=function(e,t,r){return void 0===r&&(r={}),o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(o){switch(o.label){case 0:return n=Object.assign({},g,r),m(t,this.current)&&!n.force?[2]:this.context.pending&&this.context.pending===t?(this.context.pending,[2]):t?(n.context?this.setContext(n.context,t):this.setContextByPath(t),void 0!==n.contextOptions&&this.setContextOptions(n.contextOptions,t),[4,this.context.run(t,e,n)]):(window.location.reload(),[2]);case 1:return o.sent(),[2]}}))}))},r.prototype.init=function(){y&&(window.history.replaceState({to:this.current},"",this.current),"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual",window.addEventListener("beforeunload",(function(){window.history.scrollRestoration="auto"})),window.addEventListener("load",(function(){window.history.scrollRestoration="manual"}))),window.addEventListener("popstate",this.handlePopState.bind(this)))},r.prototype.handlePopState=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e.state&&e.state.to?[4,this.runContext("pop",e.state.to)]:[2];case 1:return r.sent(),[3,3];case 2:return t=r.sent(),this.logRouterError(t),[3,3];case 3:return e&&e.state&&window.scrollTo(0,e.state.scrollPosition),[2]}}))}))},r.prototype.logRouterError=function(e){var t=e instanceof Error?e:new Error("string"==typeof e?e:"Error during route navigation!");this.app.$logger.error({exception:t,zone:"router"})},r}(function(){function e(r,o){if(this.contextMap=new Map,e.resolver)return e.resolver;this.contextMap.set(t.ContextKey.PAGE,new O(r,o)),this.contextMap.set(t.ContextKey.MODAL,new I(r,o)),e.resolver=this}return Object.defineProperty(e.prototype,"contextOptions",{get:function(){return this.context.options},enumerable:!1,configurable:!0}),e.getInstance=function(){return e.resolver},e.prototype.getContext=function(e){if(!e)throw new Error("You need to passed name for getting the context!");var t=this.contextMap.get(e);if(!t)throw new Error("Can't find context in map by name - "+e+"!");return t},e.prototype.setContextByPath=function(e){if(!e)throw new Error("You need to passed path for setting the context!");var r=/\/_action\//.test(e);if(!this.context||!r){var o=/\/modal\//.test(e)?t.ContextKey.MODAL:t.ContextKey.PAGE,n=this.contextMap.get(o);if(!n)throw new Error("Can't find context in map by name - "+o+"!");this.context=n,o===t.ContextKey.MODAL&&this.setContextOptionsByUrl(e)}},e.prototype.setContext=function(e,r){if(!e)throw new Error("You need to passed name for setting the context!");var o=this.contextMap.get(e);if(!o)throw new Error("Can't find context in map by name - "+e+"!");this.context=o,e===t.ContextKey.MODAL&&r&&this.setContextOptionsByUrl(r)},e.prototype.setContextOptions=function(e,t){if(null!==e){var r=t?v(t).query:{},o=this.context.options;this.context.options=Object.assign({},void 0===o?{}:o,T(r,f),e)}else this.context.options=null},e.prototype.setContextOptionsByUrl=function(e){var t=v(e).query,r=this.context.options;this.context.options=Object.assign({},void 0===r?{}:r,T(t,f))},e}());t.CONTEXT_OPTIONS_KEYS=f,t.Router=w,t.isSameRoute=m,t.mergeUrl=function(e,t){var r=e.currentUrl,s=e.newerUrl;if(r===s)return s;var i={disableDecode:!0},a=v(r,i),u=v(s,i),n=u.query,p=u.path,c=a.path,h=a.hash,d=a.query,f=window&&l.get(window,"__NUXT__.state.experimentsConfig",{})||{};if(c!==p&&f.mergeUrlLogger){var E=t?t():null;E&&E.log({level:3,message:"DIFFERENT PATHS: Client URL: "+r+". ComposerUrl: "+s,zone:"mergeURLLog",forceMode:!0})}var y=a.protocol,g=a.hostname;y=y?y+"//":"",g=g?y+g:"";var _=o.__assign(o.__assign({},d),n),m=Object.entries(_).map((function(e){var t=e[0],r=e[1];return r?t+"="+r:t})).join("&"),T=r.startsWith(g)?g+c:c,C=m?T+"?"+m:T;return h?""+C+h:C}},f9266:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("8a88e"),n=r("d6606"),c=r("cc71f"),l=r("de3f4"),h=r("ee6c4");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var s=i(o),a=i(n),d=i(h),u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},u(e,t)};function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var f,E,y=function(){return y=Object.assign||function(e){for(var t,r=arguments,o=1,n=arguments.length;o<n;o++)for(var i in t=r[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},y.apply(this,arguments)};function _(e){return""+(function(e){return e.indexOf("://")>0||0===e.indexOf("//")}(e)?"":window.location.origin)+e}function g(e){return"TSDK:"+e}!function(e){e.UNLOAD="unload",e.BEFORE_UNLOAD="beforeunload",e.LOAD="load"}(f||(f={})),(E=t.ETrackerHooks||(t.ETrackerHooks={})).EVENT_ADD="EVENT_ADD",E.EVENTS_SENT="EVENTS_SENT";var v,m={get:r("3c906")};!function(e){e.START="start",e.END="end"}(v||(v={}));var T,C=function(){function e(e){this.heldEvents=[],this.sentEvents=[],this.capacity=20,this.capacity=void 0!==e.capacity?e.capacity:20}return e.prototype.addHeldEvents=function(e,t){var r,o;void 0===t&&(t=v.END),"start"===t?Array.isArray(e)?(r=this.heldEvents).unshift.apply(r,e):this.heldEvents.unshift(e):Array.isArray(e)?(o=this.heldEvents).push.apply(o,e):this.heldEvents.push(e)},e.prototype.addSentEvents=function(e){var t;(t=this.sentEvents).push.apply(t,e)},e.prototype.updateHeldEvent=function(e,t){return"object"==typeof this.heldEvents[e]&&(this.heldEvents[e].data=Object.assign({},t),!0)},e.prototype.deleteHeldEvent=function(e){return"object"==typeof this.heldEvents[e]&&(this.heldEvents.splice(e,1),!0)},e.prototype.clearHeldEvents=function(){this.heldEvents=[]},e.prototype.clearSentEvents=function(){this.sentEvents=[]},e.prototype._isFilled=function(){return this.heldEvents.length>=this.capacity},e}();function b(){return{}}function A(e){return"object"==typeof e&&null!==e}function O(){try{return A(sessionStorage)}catch(e){if("Failed to read the 'sessionStorage' property from 'Window': Access is denied for this document."===e.message)return!1;throw e}}function I(){try{return A(localStorage)}catch(e){if("Failed to read the 'localStorage' property from 'Window': Access is denied for this document."===e.message)return!1;throw e}}function w(){if(O()){var e=sessionStorage.getItem(g("pageHash"));I()&&localStorage.removeItem(g(e))}}function N(){var e=T.NAVIGATE;if("object"==typeof window&&"object"==typeof window.performance)if("object"==typeof window.performance.navigation)e=window.performance.navigation.type?T.RELOAD:T.NAVIGATE;else if("function"==typeof performance.getEntriesByType){var t=performance.getEntriesByType("navigation").map((function(e){return e.type}));e=t[0]&&"reload"===t[0]?T.RELOAD:T.NAVIGATE}return e}!function(e){e.NAVIGATE="navigate",e.RELOAD="reload",e.NAVIGATE_WITH_RELOAD="navigate_with_reload",e.NAVIGATE_IN_NEW_TAB="navigate_in_new_tab"}(T||(T={}));var R=function(e){void 0===e&&(e=21);for(var t="",r=e;r--;)t+="abcdef0123456789"[16*Math.random()|0];return t};function S(){return R(8)+"-"+R(4)+"-4"+R(3)+"-"+R(4)+"-"+R(12)}function L(e,t,r){var o="";if(e.length<r)for(var n=0;n<r-e.length;++n)o+=t;return o+e}function D(e){return e.getFullYear()+"-"+L((e.getMonth()+1).toString(),"0",2)+"-"+L(e.getDate().toString(),"0",2)+" "+L(e.getHours().toString(),"0",2)+":"+L(e.getMinutes().toString(),"0",2)+":"+L(e.getSeconds().toString(),"0",2)+" "+function(e){var t=e.getTimezoneOffset()>0?"-":"+",r=Math.abs(e.getTimezoneOffset());return t+L(Math.floor(r/60).toString(),"0",2)+L((r%60).toString(),"0",2)}(e)}var P=function(e,t){this.options=t,this.event=Object.assign({},e),this.event.attributes=this.setEventAttributes(this.event.attributes)},k={name:"event",constructor:function(e){function t(t,r){return e.call(this,t,r)||this}return p(t,e),t.prototype.setEventAttributes=function(e){return void 0===e&&(e={}),e.userAgent=void 0!==e.userAgent?e.userAgent:navigator.userAgent,e.platform=void 0!==e.platform?e.platform:this.options.platform,e.screenResolutionX=void 0!==e.screenResolutionX?e.screenResolutionX:screen.width,e.screenResolutionY=void 0!==e.screenResolutionY?e.screenResolutionY:screen.height,e},t}(P)},x=function(){function e(e,t){this.navigationType=N(),this.viewNumber=1,this.pageNumber=1,this.nextPageNumber=1,this.currentUrl="",this.referralUrl="",this.pageViewId=S(),this.previousPageViewId=void 0,this.currentPageType="",this.previousPageType=void 0,this.pageInit=!1,this.supplier=new Map,this.namespace=e.namespace,this.version=e.version||"unknown",this.pageTimestamp=e.pageTimestamp,this.registryEvents(t),this.registryOnInit(),window.addEventListener(f.BEFORE_UNLOAD,w)}return Object.defineProperty(e.prototype,"isMobile",{get:function(){return void 0===this._isMobile&&(this._isMobile=d.default({tablet:!1,featureDetect:!0})),this._isMobile},enumerable:!1,configurable:!0}),e.prototype.getEventByType=function(e,t){void 0===t&&(t={});var r=this.supplier.get(e);if(void 0===r)throw new Error("Не удалось получить конструктор события по ключу - "+e);var o=new r(t,{platform:this.isMobile?c.EPlatform.MOBILE_SITE:c.EPlatform.SITE}).event;return o.actionType===c.EActionTypes.PAGE_VIEW_ACTION&&(this.savePageViewInformation(o.page),this.currentPageType="object"==typeof o.page&&void 0!==o.page.current?o.page.current:"",this.enrichEvent(o)),o.timestamp=o.timestamp||D(new Date),o.pageTimestamp=this.pageTimestamp,o.attributes.namespace=o.actionType===c.EActionTypes.SCREEN_CLICK?"native":this.namespace,o.attributes.appVersion=g(this.version),o.uuid=o.uuid||S(),o},e.prototype.enrichEvent=function(e){return void 0===e&&(e={}),e.page=Object.assign({},e.page),e.page.number=this.pageNumber,e.page.currentUrl=this.currentUrl,e.page.current=this.currentPageType,e.page.referralUrl=this.referralUrl,e.page.previous=this.previousPageType,e.page.pageViewId=this.pageViewId,e.page.previousPageViewId=this.previousPageViewId,e},e.prototype.registryEvents=function(e){if(this.supplier.set(k.name,k.constructor),Array.isArray(e))for(var t=0;t<e.length;t++){var r=e[t];r.name!==k.name&&this.supplier.set(r.name,r.constructor)}},e.prototype.registryOnInit=function(){var e=O()?sessionStorage.getItem(g("pageHash")):null,t=O()?sessionStorage.getItem(g("customReferrer")):"";this.pageInit=function(){if(O()){var e=N(),t=sessionStorage.getItem(g("pageInit"));return null!==t&&"false"!==t&&e!==T.RELOAD||(sessionStorage.setItem(g("pageInit"),"true"),!1)}return!1}();var r=this.pageInit&&null!==e&&!document.referrer?e:document.referrer;this.currentUrl=window.location.href,this.referralUrl=this.navigationType===T.RELOAD&&null!==t?t:r,!O()||null!==t&&""!==t&&this.navigationType===T.RELOAD||sessionStorage.setItem(g("customReferrer"),document.referrer),Object.defineProperty(document,"referrer",{value:_(this.referralUrl||"/"),writable:!0});var o=function(){if(O()){var e=sessionStorage.getItem(g("nextPageNumber"));return null!==e?e:null}return null}();null!==o&&(this.pageNumber=Number(o),this.nextPageNumber=this.pageNumber),this.getInformationFromStorage()},e.prototype.setViewNumber=function(){var e=this.viewNumber++;return this.viewNumber>=Number.MAX_SAFE_INTEGER&&(this.viewNumber=1),e},e.prototype.setNextPageNumber=function(){var e=this.nextPageNumber++;return this.nextPageNumber>=Number.MAX_SAFE_INTEGER&&(this.nextPageNumber=1),e},e.prototype.savePageViewInformation=function(e){void 0===e&&(e={}),this.pageNumber=this.setNextPageNumber();var t,r=this.setViewNumber();this.pageNumber>1&&(this.pageViewId=S(),this.pageInit&&this.trackPageTransition(r,e.currentUrl,e.referralUrl)),t=this.nextPageNumber,O()&&sessionStorage.setItem(g("nextPageNumber"),String(t)),this.pageInit&&I()&&localStorage.removeItem(g(this.referralUrl)),function(e,t){var r=N();if(O()){sessionStorage.setItem(g("pageHash"),e);var o=JSON.parse(sessionStorage.getItem(g("pageData"))||"{}"),n=Object.keys(o);2===n.length&&r!==T.RELOAD&&delete o[n[0]],o[e]=t,sessionStorage.setItem(g("pageData"),JSON.stringify(o))}I()&&localStorage.setItem(g(e),JSON.stringify(t))}(this.currentUrl,{pageViewId:this.pageViewId,pageType:e.current}),this.pageInit=!0},e.prototype.trackPageTransition=function(e,t,r){var o=e>1;o&&void 0===t&&console.warn("При spa-переходе необходимо прокидывать обновлённый url в page.currentUrl.");var n,i=o?this.currentUrl:this.referralUrl;o&&(Object.defineProperty(document,"referrer",{value:i,writable:!0}),n=T.NAVIGATE===T.RELOAD?1:0,"object"==typeof window&&("object"==typeof window.performance.navigation?Object.defineProperties(window.performance.navigation,{type:{value:n,writable:!0}}):Object.defineProperties(window.performance,{navigation:{value:{type:n},writable:!0}})),O()&&sessionStorage.setItem(g("customReferrer"),i));var s=void 0!==r?r:i;this.currentUrl=_(void 0!==t?t:this.currentUrl),this.referralUrl=_(s||"/"),this.getInformationFromStorage()},e.prototype.getInformationFromStorage=function(){var e=function(e){if(O()&&I()){var t=""!==e?e:sessionStorage.getItem(g("pageHash")),r=sessionStorage.getItem(g("pageData"));if(null!==t&&null!==r){var o=JSON.parse(r||"{}");return"object"==typeof o[t]&&Object.keys(o[t]).length?o[t]:{}}return JSON.parse(localStorage.getItem(g(e))||"{}")}return{}}(this.referralUrl);this.saveData(e)},e.prototype.saveData=function(e){this.previousPageType=e.pageType,this.previousPageViewId=e.pageViewId},e}();function U(e){if(null==e||"object"!=typeof e)return e;if(e instanceof Date)return e;if(e instanceof String)return e;if(e instanceof Number)return e;if(e instanceof Boolean)return e;if(e instanceof RegExp)return e;var t={};for(var r in e instanceof Array&&(t=new Array(e.length)),e)t[r]=U(e[r]);return t}(t.EDefaultEvents||(t.EDefaultEvents={})).EVENT="event";var j=function(e){function r(t,r){var o=e.call(this)||this;o.isTMEnabled=!1,o.isTMAllowed=!1,o.isPageViewSent=!1,o.isPageCloseSent=void 0,o.isOnUnload=!1,o.scrollDepth=0,o.pageStartTimestamp=0,o.checkScrollDeep=function(){window.scrollY>o.scrollDepth&&(o.scrollDepth=window.scrollY)},o.pageStartTimestamp=Date.now(),o.isTMAllowed=Boolean(m.get(t,"manager.enable"))||document.cookie.includes("ozon_devtools");try{o.config=function(e){var t=Object.assign({},e);if(!t.namespace)throw new Error("Необходимо установить параметр namespace в конструктор Tracker SDK");t.dev=void 0!==t.dev&&t.dev;var r="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,o=r||t.dev?"https://trinity-storage-stg.ozonru.me/v1/json-payloads":"https://trinity-storage.t.o3.ru/v1/json-payloads",n=r||t.dev?"https://cdn-qa.ozonru.me":"https://cdn2.ozone.ru",i=r||t.dev?"https://cdn-qa.ozonru.me":"https://cdn2.ozone.ru";return t.host=void 0!==t.host?t.host:r||t.dev?"https://xapi-stg.ozonru.me/dlte/multi":"https://xapi.ozon.ru/dlte/multi",t.trinityStorageUrl=void 0!==t.trinityStorageUrl?t.trinityStorageUrl:o,t.manager={enable:"object"==typeof t.manager&&"boolean"==typeof t.manager.enable&&t.manager.enable,host:"object"==typeof t.manager&&"string"==typeof t.manager.host?t.manager.host:n},t.metrics={enable:"object"==typeof t.metrics&&"boolean"==typeof t.metrics.enable&&t.metrics.enable,host:"object"==typeof t.metrics&&"string"==typeof t.metrics.host?t.metrics.host:i},t.sendTimeout=void 0!==t.sendTimeout?t.sendTimeout:2e4,t.pageViewEnabled=void 0===t.pageViewEnabled||t.pageViewEnabled,t.pageCloseEnabled=void 0===t.pageCloseEnabled||t.pageCloseEnabled,t.eventTemplate="function"==typeof t.eventTemplate?t.eventTemplate:b,t.pageAdditional=void 0!==t.pageAdditional?t.pageAdditional:{},t}(Object.assign({},t))}catch(e){throw console.error(e),e}try{o.store=new C({capacity:o.config.capacity})}catch(e){throw console.error(e),e}try{o.factory=new x({namespace:o.config.namespace,version:o.config.version,pageTimestamp:D(new Date(o.pageStartTimestamp))},r)}catch(e){throw console.error(e),e}return o.sendTimeout=o.config.sendTimeout,setTimeout((function(){if(-1!==("object"==typeof PerformanceObserver&&Array.isArray(PerformanceObserver.supportedEntryTypes)||[]).indexOf("layout-shift")){var e=function(){"hidden"===document.visibilityState&&(o.flush(),removeEventListener("visibilitychange",e,!0))};addEventListener("visibilitychange",e,!0)}else addEventListener("pagehide",(function(){return o.flush()}),{capture:!0,once:!0})})),window.addEventListener("scroll",o.checkScrollDeep),window.addEventListener(f.BEFORE_UNLOAD,(function(){o.isOnUnload=!0,o.config.pageCloseEnabled?o.sendPageClose():o.flush()})),o}return p(r,e),r.prototype.setTMFlag=function(e){this.isTMEnabled=e},r.prototype.sendPageView=function(e){void 0===e&&(e={});var t=U(e);this.isPageViewSent=!1,this.isPageCloseSent=void 0,this.sendCustomPageEvent(c.EActionTypes.PAGE_VIEW_ACTION,t)},r.prototype.sendPageClose=function(e){void 0===e&&(e={});var t=U(e);t.viewTime=Date.now()-this.pageStartTimestamp,t.scrollDepth=this.scrollDepth,this.factory.pageInit&&!this.isPageCloseSent&&(this.isPageCloseSent=!1,this.sendCustomPageEvent(c.EActionTypes.PAGE_CLOSE,t))},r.prototype.sendEvent=function(e,r){void 0===r&&(r={});var o=this.factory.getEventByType(t.EDefaultEvents.EVENT,e);return this.add({key:t.EDefaultEvents.EVENT,data:o},r)},r.prototype.add=function(e,r){var o=this;void 0===r&&(r={});var n=U(e);if(!this.isPageViewSent)return this.store.addHeldEvents(n),!0;var c=Array.isArray(n)?n.map((function(e){return{key:e.key,data:o.factory.enrichEvent(e.data)}})):{key:n.key,data:this.factory.enrichEvent(n.data)};if(!1===this.isPageCloseSent||this.isOnUnload&&void 0===this.isPageCloseSent)return void 0!==this.sendTimerId&&clearTimeout(this.sendTimerId),this.store.addHeldEvents(c),!0;this.store._isFilled()&&this.sendEvents();var i=r.force,s=void 0!==i&&i;return this.store.addHeldEvents(n),this.callHook(t.ETrackerHooks.EVENT_ADD,n).catch(console.error),void 0!==this.sendTimerId&&clearTimeout(this.sendTimerId),s?(this.flush(),!this.store._isFilled()):(this.isTMEnabled||(this.sendTimerId=setTimeout((function(){o.sendEvents()}),this.sendTimeout)),!this.store._isFilled())},r.prototype.flush=function(){return void 0!==this.sendTimerId&&(clearTimeout(this.sendTimerId),this.sendTimerId=void 0),this.sendEvents(),!0},r.prototype.sendXHR=function(e,t){return r=this,n=function(){return function(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(r){return[2,new Promise((function(r,o){var n=new Error("Analytics sent XHR error"),i=new XMLHttpRequest,s=function(){i.removeEventListener("load",a),i.removeEventListener("error",c)},a=function(){s(),200===i.status?r(!0):c(n)},c=function(e){s(),o(e instanceof Error?e:n)};i.open("POST",e,!0),i.addEventListener("load",a),i.addEventListener("error",c),i.send(t)}))]}))},new((o=void 0)||(o=Promise))((function(e,t){function i(e){try{a(n.next(e))}catch(e){t(e)}}function s(e){try{a(n.throw(e))}catch(e){t(e)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(i,s)}a((n=n.apply(r,[])).next())}));var r,o,n},r.prototype.sendData=function(e,t){var r=s.default(e,t);return r||(this.sendXHR(e,t).catch((function(e){return console.error(e)})),r=!0),r},r.prototype.sendEvents=function(){var e=this.store.heldEvents.concat();if(!e.length)return!1;var r=e.map((function(e){var t;return(t={})[e.key]=e.data,t})),o=function(e){return'{"events":'+e+"}"}(JSON.stringify(r)),n=this.sendData(this.config.host,o);return n&&(this.store.clearHeldEvents(),this.isTMAllowed&&this.store.addSentEvents(e),this.callHook(t.ETrackerHooks.EVENTS_SENT,e).catch(console.error)),n},r.prototype.sendCustomPageEvent=function(e,r){var o=this;void 0===r&&(r={}),r.actionType=e,r.object=y(y({},r.object),{type:"page"});var n="function"==typeof this.config.eventTemplate?this.config.eventTemplate():{},i=a.default.all([this.config.pageAdditional,n,r]),s=this.factory.getEventByType(t.EDefaultEvents.EVENT,i);s.actionType===c.EActionTypes.PAGE_VIEW_ACTION&&(this.store.heldEvents=this.store.heldEvents.concat().map((function(e){return y(y({},e),{data:o.factory.enrichEvent(e.data)})})),this.store.addHeldEvents({key:t.EDefaultEvents.EVENT,data:s},v.START),this.isPageViewSent=this.sendEvents()),s.actionType===c.EActionTypes.PAGE_CLOSE&&(this.store.addHeldEvents({key:t.EDefaultEvents.EVENT,data:this.factory.enrichEvent(s)}),this.isPageCloseSent=this.sendEvents())},r}(l.HookEmitter),M=function(){function e(){}return e.prototype.createTrackerCore=function(e,t){return"object"==typeof this.core||(this.core=new j(e,t)),this.core},e.prototype.on=function(e,t){return this.core.on(e,t)},e.prototype.once=function(e,t){return this.core.once(e,t)},e.prototype.setTMFlag=function(e){"object"==typeof this.core&&this.core.setTMFlag(e)},e.prototype.flush=function(){"object"==typeof this.core&&this.core.flush()},e.prototype.sendEvents=function(){return"object"==typeof this.core&&this.core.sendEvents()},e}();t.CommonEventModel=P,t.SHOW_MANAGER_COOKIE_NAME="tracker_manager",t.SHOW_METRICS_COOKIE_NAME="tracker_metrics",t.TRACKER_KEY_WITH_PREFIX=g,t.Tracker=j,t.TrackerCoreInitialize=M,t.WINDOW_TRACKER_FIELD="$tracker",t.generateClickHouseUUID=S,t.nanoid=R},54922:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("cc71f"),n=["disableProductDetailEvent","disableProductClickEvent","disableAddToCartEvent","disableRemoveFromCartEvent","disableCheckoutStep1Event","disableCheckoutStep2Event","disablePurchaseEvent","disableAddToWishlistEvent","disableRemoveFromWishlistEvent","disableGAPageViewEvent"],c={get:r("3c906")};function l(e){for(var t={},r=0;r<n.length;r++){var o=n[r];void 0!==e[o]&&(t[o]=e[o])}return t}function h(e){var t="object"==typeof e.composer&&"object"==typeof e.composer.cell?e.composer.cell:{},r={name:t.title||"",id:""+t.id,price:t.finalPrice||t.price,category:t.category,categoryId:t.categoryId,position:t.index,brand:t.brand,list:"object"==typeof e.widget?e.widget.name:"",quantity:t.quantity||1,dimension12:t.sellerId,dimension112:t.stock,dimension132:t.availableInDays,dimension150:t.deliverySchema,dimension145:t.storehouseId};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&void 0===r[o]&&delete r[o];return r}function i(e,t){var r=c.get(e,t);return r&&JSON.parse(JSON.stringify(r))}var a=function(){function e(){this.eventsCache=[],this.pageInit=!1}return e.prototype.setPageInit=function(e){this.pageInit=e},e.prototype.sendDLPageEvents=function(e,t,r,o){void 0===o&&(o=!1),this.pushPageInit(e,t,r),this.pushGtmStart(),o&&this.pushPageView(),this.pageInit=!0},e.prototype.sendDLWidgetsEvents=function(e){if(this.eventsCache.length)for(var t=0;t<=this.eventsCache.length;t++){var r=this.eventsCache[t];"object"==typeof r&&this.pushEcommerce(r,l(e))}},e.prototype.reinitDataLayer=function(e){this.reinit(e),this.eventsCache=[],this.pageInit=!1},e.prototype.pushEcommerce=function(e,i){if(this.pageInit){var a=this.getDataLayer(),t=function(e,t){void 0===t&&(t={});var i=e.actionType,a=c.get(e,"composer.cell.type","");if(c.get(e,"widget.name","").includes("cart.master")&&i===o.EActionTypes.CART_VIEW&&!t.disableCheckoutStep1Event)return function(e){var t="object"==typeof e.composer&&"object"==typeof e.composer.cell?e.composer.cell:{},r=t.items,o=t.totalCartPrice,i=t.totalCartQuantity,a=t.tabName;return{event:"gaEventTrigger",eventCategory:"ecommerce",eventAction:"checkoutStep1",ecommerce:{checkout:{actionField:{step:1,action:"checkout"},products:(void 0===r?[]:r).map((function(e){return h({composer:{cell:e},widget:{}})}))},ozonEcomm:{totalCartPrice:o,totalCartQuantity:i,tabName:a}}}}(e);if(c.get(e,"widget.name","").includes("checkoutFacade.master")&&i===o.EActionTypes.PRE_ORDER_ACTION&&!t.disableCheckoutStep2Event)return function(e){var t="object"==typeof e.composer&&"object"==typeof e.composer.cell?e.composer.cell:{},r=t.items,o=t.finalPrice,i=t.countItems,a=t.finalDeliveryPrice;return{event:"gaEventTrigger",eventCategory:"ecommerce",eventAction:"checkoutStep2",ecommerce:{checkout:{actionField:{step:2,action:"checkout"},products:(void 0===r?[]:r).map((function(e){return h({composer:{cell:e},widget:{}})}))},ozonEcomm:{totalCartPrice:o,totalCartQuantity:i,shipping:a}}}}(e);if("product"===a){if(i===o.EActionTypes.VIEW_ACTION&&!t.disableProductDetailEvent&&"object"==typeof e.widget&&"pdp-widget"===e.widget.name)return function(e){return{event:"gaEventTrigger",eventCategory:"ecommerce",eventAction:"productDetail",ecommerce:{detail:{products:[h(e)]}}}}(e);if(i===o.EActionTypes.CLICK_ACTION&&!t.disableProductClickEvent)return function(e){return{event:"gaEventTrigger",eventCategory:"ecommerce",eventAction:"productClick",ecommerce:{click:{actionField:{list:"object"==typeof e.widget?e.widget.name:"",action:"click"},products:[h(e)]}}}}(e);if((i===o.EActionTypes.TO_CART_ACTION||i===o.EActionTypes.INCREMENT_ACTION)&&!t.disableAddToCartEvent)return function(e){return{event:"gaEventTrigger",eventCategory:"ecommerce",eventAction:"addToCart",ecommerce:{add:{actionField:{list:"object"==typeof e.widget?e.widget.name:"",action:"add"},products:[h(e)]}}}}(e);if((i===o.EActionTypes.REMOVE_ACTION||i===o.EActionTypes.DECREMENT_ACTION)&&!t.disableRemoveFromCartEvent)return function(e){return{event:"gaEventTrigger",eventCategory:"ecommerce",eventAction:"removeFromCart",ecommerce:{remove:{products:[h(e)]}}}}(e);if(i===o.EActionTypes.FAVORITE_ACTION&&!t.disableAddToWishlistEvent)return function(e){return{event:"gaEventTrigger",eventCategory:"ecommerce",eventAction:"addToWishlist",ecommerce:{add:{actionField:{list:"object"==typeof e.widget?e.widget.name:"",action:"add"},products:[h(e)]}}}}(e);if(i===o.EActionTypes.UNFAVORITE_ACTION&&!t.disableRemoveFromWishlistEvent)return function(e){return{event:"gaEventTrigger",eventCategory:"ecommerce",eventAction:"removeFromWishlist",ecommerce:{remove:{actionField:{list:"object"==typeof e.widget?e.widget.name:"",action:"remove"},products:[h(e)]}}}}(e)}return i!==o.EActionTypes.ORDER_ACTION||t.disablePurchaseEvent?null:function(e){var t="object"==typeof e.composer&&"object"==typeof e.composer.cell?e.composer.cell:{},r=t.items,o=t.paymentType,i=t.deliveryType;return{event:"gaEventTrigger",eventCategory:"ecommerce",eventAction:"purchase",ecommerce:{purchase:{actionField:{id:t.id,revenue:t.finalPrice,coupon:t.promocode,shipping:t.finalDeliveryPrice,action:"purchase"},products:(void 0===r?[]:r).map((function(e){return h({composer:{cell:e},widget:{}})}))},ozonEcomm:{deliveryTypeGroup:i,transactionPayType:o}}}}(e)}(e,l(i));t&&Array.isArray(a)&&a.push(t)}else this.eventsCache.push(e)},e.prototype.getGTMUrl=function(e){return"https://www.googletagmanager.com/gtm.js?id="+e},e.prototype.reinit=function(e){var t=this.getGTMDataLayer();"object"==typeof t&&"object"==typeof t[e]&&("function"==typeof t[e].dataLayer.reset&&t[e].dataLayer.reset(),this.clear())},e.prototype.pushPageInit=function(e,t,r){var o=this.getDataLayer();Array.isArray(o)&&o.push(function(e,t,r){var o=i(e,"layoutTrackingInfo"),a=c.get(e,"browser.isDesktop")||!1,n=function(e){return{abGroup:c.get(e,"experiments.abGroup")||-1,areaId:c.get(e,"location.current.areaId")||-1,geoCoordinate:i(e,"location.current.geoCoordinate")||{},ip:c.get(e,"browser.ip")||""}}(e),s={currentPageUrl:t,previousPageUrl:r},u=function(e){var t=c.get(e,"shared.catalog.correctedText")||null,r=c.get(e,"shared.catalog.currentText")||null,o=t||r||null,i=c.get(e,"shared.catalog.totalFound")||0;return{searchText:o,searchResult:"number"==typeof i?i:null}}(e),p=function(e){var t=function(e){var t=c.get(e,"userInfo.user.isEmployee")||!1,r=c.get(e,"userInfo.user.userType")||1;return t?"employee":2===r?"legal":"physical"}(e);return{clientType:t,email:c.get(e,"userInfo.user.email")||"",gender:c.get(e,"userInfo.user.sex")||-1,id:c.get(e,"userInfo.user.userId")||0,isPremium:7===c.get(e,"userInfo.user.loyaltyStatus.id",0),isBot:c.get(e,"browser.isBot")||!1,experimentsIds:c.get(e,"experiments.ids")||""}}(e);return{layoutTrackingInfo:o,location:n,page:s,search:u,user:p,website:{type:a},namespace:"bx"}}(e,t,r))},e.prototype.pushPageView=function(e){void 0===e&&(e=!1);var t=this.getDataLayer();Array.isArray(t)&&!e&&t.push({event:o.EActionTypes.PAGE_VIEW_ACTION})},e.prototype.pushGtmStart=function(e){void 0===e&&(e=!1);var t=this.getDataLayer(),r={"gtm.star":Date.now(),event:"gtm.js"};Array.isArray(t)&&!e&&t.push(r)},e.prototype.getDataLayer=function(){return"undefined"==typeof window?[]:("undefined"==typeof window||Array.isArray(window.dataLayer)||(window.dataLayer=[]),window.dataLayer)},e.prototype.getGTMDataLayer=function(){return"undefined"!=typeof window&&"object"==typeof window.google_tag_manager?window.google_tag_manager:{}},e.prototype.clear=function(){var e=this.getDataLayer();Array.isArray(e)&&e.length&&e.splice(0,e.length)},e}();t.DataLayer=a,t.allowedEcommerceFlags=n},bd7eb:function(e,t,r){"use strict";var o=r("f9266"),n=r("54922"),c=r("cc71f"),l=function(e,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},l(e,t)};function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i,s=function(){return s=Object.assign||function(e){for(var t,r=arguments,o=1,n=arguments.length;o<n;o++)for(var i in t=r[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},d=function(e){function t(t,r){return e.call(this,t,r)||this}return h(t,e),t.prototype.setEventAttributes=function(e){return void 0===e&&(e={}),e.userAgent=void 0!==e.userAgent?e.userAgent:navigator.userAgent,e.platform=void 0!==e.platform?e.platform:this.options.platform,e.screenResolutionX=void 0!==e.screenResolutionX?e.screenResolutionX:screen.width,e.screenResolutionY=void 0!==e.screenResolutionY?e.screenResolutionY:screen.height,e},t}(o.CommonEventModel),a=function(e){function t(t,r){return e.call(this,t,r)||this}return h(t,e),t.prototype.setEventAttributes=function(e){return void 0===e&&(e={}),e.screenResolutionX=void 0!==e.screenResolutionX?e.screenResolutionX:screen.width,e.screenResolutionY=void 0!==e.screenResolutionY?e.screenResolutionY:screen.height,e},t}(o.CommonEventModel);!function(e){e.COMPOSER_EVENT="composerEvent",e.TRINITY_EVENT="trinityEvent"}(i||(i={}));var p={name:i.COMPOSER_EVENT,constructor:d},u={name:i.TRINITY_EVENT,constructor:a},f={get:r("3c906")},E=function(e){return{page:s({layoutId:e.layoutId,layoutVersion:e.layoutVersion,ruleId:e.ruleId,categoryId:e.categoryId,tagId:e.tagId,sku:e.sku,highlightId:e.highlightId,sellerId:e.sellerId,brandId:e.brandId},e.highlightIsExpress?{highlightIsExpress:e.highlightIsExpress}:{})}},y=function(e){var t=m(e,"layoutTrackingInfo")||{};return{attributes:{deviceType:t.deviceType,platform:t.platform,templateType:t.templateType},user:{isBot:f.get(e,"browser.isBot")||!1,marketplaceId:t.marketplaceId}}},_=function(e,t){void 0===t&&(t={});var r=v(t.custom);return s(s({},t),{attributes:s(s({},t.attributes),y(e).attributes),pageToken:e.pageToken,userToken:e.userToken,custom:r})},g=function(e,t){void 0===t&&(t={});var r=m(e,"layoutTrackingInfo")||{},o="string"==typeof t.widget?JSON.parse(t.widget):t.widget,n="object"==typeof t.composer?"string"==typeof t.composer.slice?JSON.parse(t.composer.slice):t.composer.slice:void 0,i="object"==typeof t.composer?"string"==typeof t.composer.cell?JSON.parse(t.composer.cell):t.composer.cell:void 0,c="object"==typeof t.composer?v(t.composer.custom):void 0,a={};return"object"==typeof n&&(a.slice=n),"object"==typeof i&&(a.cell=i),"object"==typeof c&&(a.custom=c),s(s(s(s({},t),{attributes:s(s({},t.attributes),y(e).attributes),user:s(s({},t.user),y(e).user)}),E(r)),{widget:o,composer:a})},v=function(e){return"boolean"==typeof e?{}:"object"==typeof e?e:void 0};function m(e,t){var r=f.get(e,t);return r&&JSON.parse(JSON.stringify(r))}var b,T=function(){function e(){this.data={}}return e.prototype.setData=function(e){this.data=Object.assign({},e)},e.prototype.getData=function(){return this.data},e}(),C=function(){function e(e){this.tracker=e}return e.prototype.send=function(e,t){this.tracker.sendComposerEvent({actionType:e,widget:t.widget,composer:{cell:t.cell,slice:t.slice,custom:t.custom}})},e}(),A=function(){function e(e){this.trackingPayloads={},this.tracker=e}return e.prototype.setTrackingPayloads=function(e){this.trackingPayloads=e},e.prototype.send=function(e,t,r){var o=this;if(void 0===r&&(r={}),"object"!=typeof t||null===t)return!1;var n=t.key,i=t.actionType,c=t.nested,a=void 0===c?[]:c,p={},u=t.sliceKey,l=s(s({actionType:i},e),{custom:r});n&&(l.cellToken=n),"string"==typeof u&&u&&(l.sliceToken=u),p.trinityEvent=l;var h=e.widgetToken,d=this.composePayloadBySeparateKeys(t,h),f=s(s({},d),{custom:r});f.widget||(f.widget=this.getPayloadByKey(h)),p.composerEvent={actionType:i,widget:f.widget,composer:{cell:f.cell,slice:f.slice,custom:f.custom}};var g=this.tracker.sendTrinityAndComposerEvents(p);return Array.isArray(a)&&a.length&&a.forEach((function(t){return o.send(e,t,{})})),g},e.prototype.composePayloadBySeparateKeys=function(e,t){var r=e.sliceKey;return{cell:this.getPayloadByKey(e.key),slice:this.getPayloadByKey(r),widget:this.getPayloadByKey(t)}},e.prototype.getPayloadByKey=function(e){if("string"!=typeof e||e&&!this.trackingPayloads[e])return{};try{return JSON.parse(this.trackingPayloads[e])}catch(e){return{}}},e}(),O=function(e){function t(t,r){var o=e.call(this)||this;return o.version="2.1.14",o.pageStatisticsTrackerMetrics="",o.stateMemory=new T,o.dataLayer=new n.DataLayer,o.legacyAnalyticsService=new C(o),o.legacyAnalyticsByKeyService=new A(o),"object"!=typeof window||(o.stateMemory.setData(r),o.init(t)),o}return h(t,e),t.prototype.init=function(e){var t=this.stateMemory.getData(),r=this.createTrackerCore(s(s({},e),{eventTemplate:function(){return s(s({},y(t)),{page:s({current:t.layoutTrackingInfo.pageType,title:document.title},E(t.layoutTrackingInfo).page)})},version:this.version}),[p,u]);return"object"!=typeof window||o.WINDOW_TRACKER_FIELD in window||(window[o.WINDOW_TRACKER_FIELD]=this),r.config.pageViewEnabled&&this.sendPageView(),this},t.prototype.setPageStatisticsTrackerMetrics=function(e){this.pageStatisticsTrackerMetrics=e},Object.defineProperty(t.prototype,"pageViewId",{get:function(){return this.getPageViewId()},enumerable:!1,configurable:!0}),t.prototype.getPageViewId=function(){if("object"==typeof this.core)return this.core.factory.pageViewId},t.prototype.sendPageView=function(e){if(void 0===e&&(e={}),"object"==typeof this.core){var t=this.stateMemory.getData();this.core.sendPageView(s(s({},e),{page:s({current:t.layoutTrackingInfo.pageType,currentUrl:"object"==typeof e.page?e.page.currentUrl:void 0},E(t.layoutTrackingInfo).page)}))}},t.prototype.sendPageClose=function(e){void 0===e&&(e={}),"object"==typeof this.core&&this.core.sendPageClose(e)},t.prototype.sendDLPageEvents=function(e,t,r,o){void 0===o&&(o=!1),"object"==typeof this.dataLayer&&this.dataLayer.sendDLPageEvents(e,t,r,o)},t.prototype.sendDLWidgetsEvents=function(e){"object"==typeof this.dataLayer&&this.dataLayer.sendDLWidgetsEvents(e)},t.prototype.reinitDataLayer=function(e){"object"==typeof this.dataLayer&&this.dataLayer.reinitDataLayer(e)},t.prototype.setPageInit=function(e){"object"==typeof this.dataLayer&&this.dataLayer.setPageInit(e)},t.prototype.send=function(e,t,r){return void 0===r&&(r={}),"object"==typeof t.composerEvent&&"object"==typeof t.trinityEvent?(t.composerEvent.actionType=e,t.trinityEvent.actionType=e,this.sendTrinityAndComposerEvents(t,r)):"object"==typeof t.composerEvent?(t.composerEvent.actionType=e,this.sendComposerEvent(t.composerEvent,r)):"object"==typeof t.trinityEvent&&(t.trinityEvent.actionType=e,this.sendTrinityEvent(t.trinityEvent,r))},t.prototype.sendComposerEvent=function(e,t){if(void 0===t&&(t={}),"object"==typeof this.core){var r=this.stateMemory.getData(),o=g(r,e),n=this.core.factory.getEventByType(i.COMPOSER_EVENT,o),s=this.core.add({key:i.COMPOSER_EVENT,data:n},t);return this.dataLayer.pushEcommerce(n,r.experimentsConfig),s}return!1},t.prototype.sendTrinityEvent=function(e,t){if(void 0===t&&(t={}),"object"==typeof this.core){var r=_(this.stateMemory.getData(),e),o=this.core.factory.getEventByType(i.TRINITY_EVENT,r);return this.core.add({key:i.TRINITY_EVENT,data:o},t)}return!1},t.prototype.sendEvent=function(e,t){return void 0===t&&(t={}),"object"==typeof this.core&&this.core.sendEvent(e,t)},t.prototype.sendTrinityAndComposerEvents=function(e,t){if(void 0===t&&(t={}),"object"==typeof this.core){var r=this.stateMemory.getData(),n=o.generateClickHouseUUID(),c=Object.assign({},{trinityEvent:s(s({},_(r,e.trinityEvent)),{uuid:n}),composerEvent:s(s({},g(r,e.composerEvent)),{uuid:n})}),a=this.core.factory.getEventByType(i.COMPOSER_EVENT,c.composerEvent),p=this.core.factory.getEventByType(i.TRINITY_EVENT,c.trinityEvent);return this.dataLayer.pushEcommerce(a,r.experimentsConfig),this.core.add([{key:i.COMPOSER_EVENT,data:a},{key:i.TRINITY_EVENT,data:p}],t)}return!1},t}(o.TrackerCoreInitialize),I=(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TM_LOCAL_HOST="http://localhost:5192",t.TM_NEED_LOCALHOST_COOKIE_NAME="tm_local",t.loadTrackerManagerScript=function(e,t){var r=document.createElement("script"),o=document.getElementsByTagName("script")[0];r.async=!0,r.src=e+"/s3/oztm/2.1.13/manager.js",void 0!==t&&r.setAttribute("nonce",t),o.parentNode&&o.parentNode.insertBefore(r,o);var n=setInterval((function(){if(window.$trackerManager&&"function"==typeof window.$trackerManager){var e=window.$trackerManager,t=document.createElement("div");t.setAttribute("id","tracker-manager"),t.style.cssText="position: sticky; top: 0; z-index: 9999;";var r=document.querySelector("#__ozon");document.body.insertBefore(t,r),new e({target:t}),clearInterval(n)}}),1e3)}}(b={path:void 0,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},b.exports),b.exports);Object.defineProperty(t,"e7",{enumerable:!0,get:function(){return o.SHOW_MANAGER_COOKIE_NAME}}),Object.defineProperty(t,"Oy",{enumerable:!0,get:function(){return o.SHOW_METRICS_COOKIE_NAME}}),Object.defineProperty(t,"W5",{enumerable:!0,get:function(){return o.TRACKER_KEY_WITH_PREFIX}}),Object.defineProperty(t,"rr",{enumerable:!0,get:function(){return c.EActionTypes}}),t.Jz=I.TM_LOCAL_HOST,t.QX=I.TM_NEED_LOCALHOST_COOKIE_NAME,t.fs=O},cc71f:function(e,t){"use strict";var r,o;Object.defineProperty(t,"__esModule",{value:!0}),(r=t.EActionTypes||(t.EActionTypes={})).PAGE_VIEW_ACTION="page_view",r.VIEW_ACTION="view",r.SHOW_ACTION="show",r.CLOSE_ACTION="close",r.ADD_ACTION="add",r.CLEAR_ACTION="clear",r.SCREEN_CLICK="screen_click",r.DECREMENT_ACTION="decrement",r.INCREMENT_ACTION="increment",r.DISLIKE_ACTION="dislike",r.LIKE_ACTION="like",r.SET_ACTION="set",r.UNSET_ACTION="unset",r.CLICK_ACTION="click",r.SELECT_ACTION="select",r.UNSELECT_ACTION="unselect",r.REGION_SET_ACTION="region_set",r.WIDGET_VIEW_ACTION="widget_view",r.EXIT_LINK_ACTION="exit_link",r.SHARE_ACTION="share",r.SAVE_ACTION="save",r.RESTORE_ACTION="restore",r.RETURN_ACTION="return",r.BACK_ACTION="back",r.SEND="send",r.UNLOAD="unload",r.SUBMIT="submit",r.DELETE="delete",r.EDIT="edit",r.CLICK_CLUSTER="click_cluster",r.GO_TO_PAYMENT="go_to_payment",r.CLICK_CANCEL="click_cancel",r.CLICK_RETURN_ITEMS="click_return_items",r.CLICK_DELIVERY_TIME="click_delivery_time",r.PAGE_CLOSE="page_close",r.CLICK_EXTEND_DELIVERY="click_extend_delivery",r.EXTEND_DELIVERY="extend_delivery",r.CHANGE_PAYMENT_TYPE="change_payment_type",r.CLICK_RECEIVER="click_receiver",r.CHANGE_RECEIVER="change_receiver",r.CLICK_NEW_CARD="click_new_card",r.PAGE_SCROLL="page_scroll",r.CLICK_LEAVE_AT_DOOR="click_leave_at_door",r.LEAVE_AT_DOOR="leave_at_door",r.DOWNLOAD_ACTIVATION_CODE="download_activation_code",r.SWITCH_TALK_TYPE="switch_talk_type",r.GROUP_IN_CART="group_in_cart",r.CART_VIEW="cart_view",r.TO_CART_ACTION="to_cart",r.TO_CART_ALL_ACTION="to_cart_all",r.REMOVE_ACTION="remove",r.REMOVE_ALL_ACTION="remove_all",r.AVAIL_ON_ACTION="avail_on",r.AVAIL_OFF_ACTION="avail_off",r.FAVORITE_ACTION="favorite",r.UNFAVORITE_ACTION="unfavorite",r.COMPARE_ACTION="compare",r.UNCOMPARE_ACTION="uncompare",r.PRICE_SUBSCRIBE_ACTION="subscribe_price",r.PRICE_UNSUBSCRIBE_ACTION="unsubscribe_price",r.SUBSCRIBE_ACTION="subscribe",r.SUBSCRIPTION_PRODUCT_ACTION="subscription_product",r.UNSUBSCRIBE_ACTION="unsubscribe",r.VOTE="vote",r.REPLY_ACTION="reply",r.RECALL_ACTION="recall",r.UNLIKE_ACTION="unlike",r.BLOCK_ACTION="block",r.UNBLOCK_ACTION="unblock",r.SPLIT_IN_PRE_ORDER="split_in_pre_order",r.FULL_VIEW_ACTION="full_view",r.PRE_ORDER_ACTION="pre_order",r.RE_ORDER_ACTION="re_order",r.CANCEL_ACTION="cancel",r.CANCEL_CONFIRM_ACTION="cancel_confirm",r.ORDER_PREMIUM_ACTION="order_premium",r.TO_CHECKOUT_ACTION="to_checkout",r.TO_CREDIT_CHECKOUT_ACTION="to_credit_checkout",r.ORDER_ACTION="order",r.BACK_TO_CART_ACTION="back_to_cart",r.ADD_ADDRESS="add_address",r.BUTTON_CLICK_ADDRESS_CHANGE_ACTION="button_click_address_change",r.CHANGE_DELIVERY_SERVICE_ACTION="change_delivery_service",r.CHANGE_SAFE_ADDRESS_ACTION="change_safe_address",r.SELECT_DELIVERY_ACTION="select_delivery",r.CHANGE_DUE_ACTION="change_due",r.CHANGE_TIME_SLOT_ACTION="change_time_slot",r.PROMOCODE_ACTIVATION_ACTION="promocode_activation",r.ADDRESS_IN_ADDRESSBOOK="address_in_addressbook",r.SELECT_ADDRESS_ACTION="select_address",r.MAP_VIEW="map_view",r.COURIER_MAP_VIEW_ACTION="courier_map_view",r.SUGGEST_REGION_ACTION="suggest_region",r.SUGGEST_COUNTRY_ACTION="suggest_country",r.SUGGEST_ADDRESS_ACTION="suggest_address",r.MAP_ADDRESS_ACTION="map_address",r.MAP_REGION_ACTION="map_region",r.REVERSE_GEOCODE_FAIL_ACTION="reverse_geocode_fail",r.CLICK_ALL_PAYMENT_ACTION="click_on_all_payment",r.PAYMENT_SUCCESS_ACTION="payment_success",r.SEARCH_ACTION="search",r.SEARCH_HELPER_ACTION="search_helper",r.CHOOSE_DEPARTAMENT_ACTION="choose_department",r.LOGIN_ACTION="login",r.LOGOUT_ACTION="logout",r.REGISTRATION_ACTION="registration",r.PHONE_CHANGE_ACTION="phone_change",r.EMAIL_CHANGE_ACTION="email_change",r.LOGIN_CHANGE_ACTION="login_change",r.PASSWORD_CHANGE_ACTION="password_change",r.REPORT_ACTION="report",r.CARD_ORDER_CLICK_ACTION="card_order_button_click",r.CARD_NEXT_BUTTON_CLICK_ACTION="next_button_click",r.CARD_NAVI_CLICK_ACTION="navigation_click",r.CARD_TERMS_CLICK_ACTION="terms_of_use_link_click",r.CARD_DONE_BUTTON_CLICK_ACTION="done_button_click",r.IMPRESSION_ACTION="impression",r.OPEN="open",r.CHAT_OPEN="open",r.DIALOG_LIST="dialog_list",r.VIDEO_VIEW="video_view",r.VIDEO_VIEW_FINISH="video_view_finish",r.VIDEO_REWIND="video_rewind",r.COVER_PREVIEW_OPEN="cover_preview_open",r.COVER_VIEW_START="cover_view_start",r.COVER_VIEW_END="cover_view_end",r.VIDEO_PREVIEW_OPEN="video_preview_open",r.VIDEO_VIEW_START="video_view_start",r.VIDEO_VIEW_END="video_view_end",(o=t.EPlatform||(t.EPlatform={})).SITE="site",o.MOBILE_SITE="mobile_site"},"75ce3":function(e,t,r){var o=r("066fb"),n=r("affab");void 0===n.window&&(n.window={}),void 0===n.window.__federation__&&(n.window.__federation__={}),void 0===n.window.__federation__.deps&&(n.window.__federation__.deps={}),void 0===n.window.__federation__.deps.BxFeRouter&&(n.window.__federation__.deps.BxFeRouter=o),e.exports=o}}]);